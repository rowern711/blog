---
layout: default
---
<article class="entry post">
  <h1>{{ page.title }}</h1>
  <p class="author">{{ page.date | date: '%B %d, %Y' }} &mdash; {{ page.pillar | upcase }}</p>
  <div class="entrywrap">
    {{ content }}
  </div>
  <div class="post-tags">
    <strong>{{ page.pillar | upcase }}</strong>
    {% if page.topics %}
      &middot;
      {% for topic in page.topics %}
        <a href="{{ '/topic/' | append: topic | append: '/' | relative_url }}">{{ topic }}</a>{% unless forloop.last %}, {% endunless %}
      {% endfor %}
    {% endif %}
  </div>
</article>
<section class="entry related" aria-labelledby="related-heading">
  <h2 id="related-heading">Related posts</h2>
  <div class="related-grid">
    {% assign related = site.posts | where: 'pillar', page.pillar %}
    {% for post in site.posts %}
      {% if post.url != page.url %}
        {% for topic in page.topics %}
          {% if post.topics contains topic %}
            {% assign related = related | push: post %}
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}
    {% assign related = related | uniq | where_exp: 'p','p.url != page.url' | sort: 'date' | reverse | slice: 0, 5 %}
    {% if related.size > 0 %}
      {% for post in related %}
      <article class="related-card">
        <p class="author">{{ post.pillar | upcase }}</p>
        <h3><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
        <p class="post-date">{{ post.date | date: '%b %d, %Y' }}</p>
      </article>
      {% endfor %}
    {% else %}
      <p class="description">No close neighbors yet.</p>
    {% endif %}
  </div>
</section>
